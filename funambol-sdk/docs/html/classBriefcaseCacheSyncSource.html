<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Funambol C++ Client Library: BriefcaseCacheSyncSource Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>BriefcaseCacheSyncSource Class Reference<br>
<small>
[<a class="el" href="group__Client.html">Sync Client</a>]</small>
</h1><!-- doxytag: class="BriefcaseCacheSyncSource" --><!-- doxytag: inherits="CacheSyncSource" -->Synchronizes the content of files in a certain directory and handles the modification and cache or listener structure.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="BriefcaseCacheSyncSource_8h-source.html">BriefcaseCacheSyncSource.h</a>&gt;</code>
<p>
Inheritance diagram for BriefcaseCacheSyncSource:<p><center><img src="classBriefcaseCacheSyncSource__inherit__graph.png" border="0" usemap="#BriefcaseCacheSyncSource__inherit__map" alt="Inheritance graph"></center>
<map name="BriefcaseCacheSyncSource__inherit__map">
<area href="classCacheSyncSource.html" shape="rect" coords="36,82,175,106" alt="">
<area href="classSyncSource.html" shape="rect" coords="56,7,155,31" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for BriefcaseCacheSyncSource:<p><center><img src="classBriefcaseCacheSyncSource__coll__graph.png" border="0" usemap="#BriefcaseCacheSyncSource__coll__map" alt="Collaboration graph"></center>
<map name="BriefcaseCacheSyncSource__coll__map">
<area href="classCacheSyncSource.html" shape="rect" coords="257,231,396,255" alt="">
<area href="classSyncSource.html" shape="rect" coords="151,98,249,122" alt="">
<area href="classAbstractSyncSourceConfig.html" shape="rect" coords="5,7,203,31" alt="">
<area href="classSyncSourceReport.html" shape="rect" coords="227,7,368,31" alt="">
<area href="classEnumeration.html" shape="rect" coords="273,98,380,122" alt="">
<area href="classKeyValueStore.html" shape="rect" coords="404,98,519,122" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classBriefcaseCacheSyncSource-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="fc5fc95bc97fbc2b5b865721433f06bf"></a><!-- doxytag: member="BriefcaseCacheSyncSource::BriefcaseCacheSyncSource" ref="fc5fc95bc97fbc2b5b865721433f06bf" args="(const WCHAR *name, AbstractSyncSourceConfig *sc)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>BriefcaseCacheSyncSource</b> (const WCHAR *name, <a class="el" href="classAbstractSyncSourceConfig.html">AbstractSyncSourceConfig</a> *sc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="56676fc2447320091b1f02a94de5c378"></a><!-- doxytag: member="BriefcaseCacheSyncSource::assign" ref="56676fc2447320091b1f02a94de5c378" args="(BriefcaseCacheSyncSource &amp;s)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>assign</b> (<a class="el" href="classBriefcaseCacheSyncSource.html">BriefcaseCacheSyncSource</a> &amp;s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="75f16798e97cfbf7b9907b55a3e8097c"></a><!-- doxytag: member="BriefcaseCacheSyncSource::setDir" ref="75f16798e97cfbf7b9907b55a3e8097c" args="(const char *p)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBriefcaseCacheSyncSource.html#75f16798e97cfbf7b9907b55a3e8097c">setDir</a> (const char *p)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">set/get the directory where to sync the files <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ba3c1988995d66b409166f6f49fe00fb"></a><!-- doxytag: member="BriefcaseCacheSyncSource::getDir" ref="ba3c1988995d66b409166f6f49fe00fb" args="()" -->
const StringBuffer &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><b>getDir</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBriefcaseCacheSyncSource.html#23465b0598293b417347c91881a5e935">saveFileData</a> (FileData &amp;file)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Save the file inside the filesystem.  <a href="#23465b0598293b417347c91881a5e935"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBriefcaseCacheSyncSource.html#2e0f4fbc1ee18d0bd43678fff6c3d24e">saveFileData</a> (SyncItem &amp;item, bool isUpdate)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Save the file inside the filesystem.  <a href="#2e0f4fbc1ee18d0bd43678fff6c3d24e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="794442b789a844d6f255025745ca2708"></a><!-- doxytag: member="BriefcaseCacheSyncSource::parseFileData" ref="794442b789a844d6f255025745ca2708" args="(FileData &amp;file, SyncItem &amp;item)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBriefcaseCacheSyncSource.html#794442b789a844d6f255025745ca2708">parseFileData</a> (FileData &amp;file, SyncItem &amp;item)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Parse the file object Return 0 is success otherwise failure. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classEnumeration.html">Enumeration</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBriefcaseCacheSyncSource.html#b36960ad1297b0d2886ca40c3bee83ee">getAllItemList</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the list of all the keys stored in a StringBuffer.  <a href="#b36960ad1297b0d2886ca40c3bee83ee"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBriefcaseCacheSyncSource.html#3f38994c8e59342a30de5ad793df3fb6">removeAllItems</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes all the item of the sync source.  <a href="#3f38994c8e59342a30de5ad793df3fb6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBriefcaseCacheSyncSource.html#6e9a42186fb534603f13eca46f5e4b7f">insertItem</a> (SyncItem &amp;item)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called by the sync engine to add an item that the server has sent.  <a href="#6e9a42186fb534603f13eca46f5e4b7f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBriefcaseCacheSyncSource.html#72d88d657c489787e260501400dddb5c">modifyItem</a> (SyncItem &amp;item)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called by the sync engine to update an item that the source already should have.  <a href="#72d88d657c489787e260501400dddb5c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBriefcaseCacheSyncSource.html#6a1c2465b05c14df5659dc1f2573da8a">removeItem</a> (SyncItem &amp;item)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called by the sync engine to update an item that the source already should have.  <a href="#6a1c2465b05c14df5659dc1f2573da8a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBriefcaseCacheSyncSource.html#dde4fdd141c7ec9beffce33fca26ab42">getItemContent</a> (StringBuffer &amp;key, size_t *size)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the content of an item given the key.  <a href="#dde4fdd141c7ec9beffce33fca26ab42"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Synchronizes the content of files in a certain directory and handles the modification and cache or listener structure. 
<p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="23465b0598293b417347c91881a5e935"></a><!-- doxytag: member="BriefcaseCacheSyncSource::saveFileData" ref="23465b0598293b417347c91881a5e935" args="(FileData &amp;file)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BriefcaseCacheSyncSource::saveFileData           </td>
          <td>(</td>
          <td class="paramtype">FileData &amp;&nbsp;</td>
          <td class="paramname"> <em>file</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Save the file inside the filesystem. 
<p>
Return 0 is success otherwise failure 
</div>
</div><p>
<a class="anchor" name="2e0f4fbc1ee18d0bd43678fff6c3d24e"></a><!-- doxytag: member="BriefcaseCacheSyncSource::saveFileData" ref="2e0f4fbc1ee18d0bd43678fff6c3d24e" args="(SyncItem &amp;item, bool isUpdate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BriefcaseCacheSyncSource::saveFileData           </td>
          <td>(</td>
          <td class="paramtype">SyncItem &amp;&nbsp;</td>
          <td class="paramname"> <em>item</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>isUpdate</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Save the file inside the filesystem. 
<p>
It doesn't use the FileData SyncMLobject but it uses only the data as inside<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>item</em>&nbsp;</td><td>the item from which get the data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>isUpdate</em>&nbsp;</td><td>it says if the item must to be add (false) or updated (true) </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="b36960ad1297b0d2886ca40c3bee83ee"></a><!-- doxytag: member="BriefcaseCacheSyncSource::getAllItemList" ref="b36960ad1297b0d2886ca40c3bee83ee" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEnumeration.html">Enumeration</a>* BriefcaseCacheSyncSource::getAllItemList           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the list of all the keys stored in a StringBuffer. 
<p>
It reads all the files name in the directory. The directory is set in the sync source. 
<p>
Implements <a class="el" href="classCacheSyncSource.html#4948e75960aac2250617013f0f2c9d74">CacheSyncSource</a>.
</div>
</div><p>
<a class="anchor" name="3f38994c8e59342a30de5ad793df3fb6"></a><!-- doxytag: member="BriefcaseCacheSyncSource::removeAllItems" ref="3f38994c8e59342a30de5ad793df3fb6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BriefcaseCacheSyncSource::removeAllItems           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Removes all the item of the sync source. 
<p>
It is called by the engine in the case of a refresh from server to clean all the client items before receiving the server ones. 
<p>
Implements <a class="el" href="classSyncSource.html#cca2caca3163f7cb179f3e38c188f5f7">SyncSource</a>.
</div>
</div><p>
<a class="anchor" name="6e9a42186fb534603f13eca46f5e4b7f"></a><!-- doxytag: member="BriefcaseCacheSyncSource::insertItem" ref="6e9a42186fb534603f13eca46f5e4b7f" args="(SyncItem &amp;item)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BriefcaseCacheSyncSource::insertItem           </td>
          <td>(</td>
          <td class="paramtype">SyncItem &amp;&nbsp;</td>
          <td class="paramname"> <em>item</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called by the sync engine to add an item that the server has sent. 
<p>
The sync source is expected to add it to its database, then set the key to the local key assigned to the new item. Alternatively the sync source can match the new item against one of the existing items and return that key.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>item</em>&nbsp;</td><td>the item as sent by the server </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>SyncML status code </dd></dl>

<p>
Implements <a class="el" href="classCacheSyncSource.html#0e7c91c6433cfe60e82bd35cada23c56">CacheSyncSource</a>.
</div>
</div><p>
<a class="anchor" name="72d88d657c489787e260501400dddb5c"></a><!-- doxytag: member="BriefcaseCacheSyncSource::modifyItem" ref="72d88d657c489787e260501400dddb5c" args="(SyncItem &amp;item)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BriefcaseCacheSyncSource::modifyItem           </td>
          <td>(</td>
          <td class="paramtype">SyncItem &amp;&nbsp;</td>
          <td class="paramname"> <em>item</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called by the sync engine to update an item that the source already should have. 
<p>
The item's key is the local key of that item.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>item</em>&nbsp;</td><td>the item as sent by the server </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>SyncML status code </dd></dl>

<p>
Implements <a class="el" href="classCacheSyncSource.html#45760711354feddb886c863598e2a9d2">CacheSyncSource</a>.
</div>
</div><p>
<a class="anchor" name="6a1c2465b05c14df5659dc1f2573da8a"></a><!-- doxytag: member="BriefcaseCacheSyncSource::removeItem" ref="6a1c2465b05c14df5659dc1f2573da8a" args="(SyncItem &amp;item)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BriefcaseCacheSyncSource::removeItem           </td>
          <td>(</td>
          <td class="paramtype">SyncItem &amp;&nbsp;</td>
          <td class="paramname"> <em>item</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called by the sync engine to update an item that the source already should have. 
<p>
The item's key is the local key of that item, no data is provided.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>item</em>&nbsp;</td><td>the item as sent by the server </td></tr>
  </table>
</dl>

<p>
Implements <a class="el" href="classCacheSyncSource.html#341c8c4bba5999016c01087f25c76f13">CacheSyncSource</a>.
</div>
</div><p>
<a class="anchor" name="dde4fdd141c7ec9beffce33fca26ab42"></a><!-- doxytag: member="BriefcaseCacheSyncSource::getItemContent" ref="dde4fdd141c7ec9beffce33fca26ab42" args="(StringBuffer &amp;key, size_t *size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* BriefcaseCacheSyncSource::getItemContent           </td>
          <td>(</td>
          <td class="paramtype">StringBuffer &amp;&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the content of an item given the key. 
<p>
It is used to populate the SyncItem before the engine uses it in the usual flow of the sync. It is used also by the itemHandler if needed (i.e. in the cache implementation)<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>the local key of the item </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>OUT: the size of the content </td></tr>
  </table>
</dl>

<p>
Implements <a class="el" href="classCacheSyncSource.html#165f9c680c238d15c72b173c4950c1c2">CacheSyncSource</a>.
</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>src/include/common/examples/<a class="el" href="BriefcaseCacheSyncSource_8h-source.html">BriefcaseCacheSyncSource.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Fri Jul 25 15:04:17 2008 for Funambol C++ Client Library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
