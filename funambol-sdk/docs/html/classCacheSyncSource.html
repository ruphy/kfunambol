<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Funambol C++ Client Library: CacheSyncSource Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>CacheSyncSource Class Reference<br>
<small>
[<a class="el" href="group__Client.html">Sync Client</a>]</small>
</h1><!-- doxytag: class="CacheSyncSource" --><!-- doxytag: inherits="SyncSource" -->This is an extension of the basic <a class="el" href="classSyncSource.html">SyncSource</a> that a SyncML client developer could implement to let the sync engine access the client's data.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="CacheSyncSource_8h-source.html">CacheSyncSource.h</a>&gt;</code>
<p>
Inheritance diagram for CacheSyncSource:<p><center><img src="classCacheSyncSource__inherit__graph.png" border="0" usemap="#CacheSyncSource__inherit__map" alt="Inheritance graph"></center>
<map name="CacheSyncSource__inherit__map">
<area href="classBriefcaseCacheSyncSource.html" shape="rect" coords="6,156,206,180" alt="">
<area href="classSyncSource.html" shape="rect" coords="56,7,155,31" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for CacheSyncSource:<p><center><img src="classCacheSyncSource__coll__graph.png" border="0" usemap="#CacheSyncSource__coll__map" alt="Collaboration graph"></center>
<map name="CacheSyncSource__coll__map">
<area href="classSyncSource.html" shape="rect" coords="151,97,249,121" alt="">
<area href="classAbstractSyncSourceConfig.html" shape="rect" coords="5,7,203,31" alt="">
<area href="classSyncSourceReport.html" shape="rect" coords="227,7,368,31" alt="">
<area href="classEnumeration.html" shape="rect" coords="273,97,380,121" alt="">
<area href="classKeyValueStore.html" shape="rect" coords="404,97,519,121" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classCacheSyncSource-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#3eabd43ca0667b7afb2f1302af1c630d">CacheSyncSource</a> (const WCHAR *name, <a class="el" href="classAbstractSyncSourceConfig.html">AbstractSyncSourceConfig</a> *sc, <a class="el" href="classKeyValueStore.html">KeyValueStore</a> *cache=NULL)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor: create a <a class="el" href="classCacheSyncSource.html">CacheSyncSource</a> with the specified name.  <a href="#3eabd43ca0667b7afb2f1302af1c630d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#7326b8f54971e979c10e2cb04daa3aa4">setItemStatus</a> (const WCHAR *key, int status, const char *command)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">called by the sync engine with the status returned by the server for a certain item that the client sent to the server.  <a href="#7326b8f54971e979c10e2cb04daa3aa4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SyncItem *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#f342003c8a9eabba7f624b5268a564f3">getFirstItemKey</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the key of the first SyncItem of all.  <a href="#f342003c8a9eabba7f624b5268a564f3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SyncItem *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#d3474cc0881a5fc312c04999a5e2c152">getNextItemKey</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the key of the next SyncItem of all.  <a href="#d3474cc0881a5fc312c04999a5e2c152"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SyncItem *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#5aefe23e267e4f2e5987cfcaf2599dcb">getFirstItem</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the first SyncItem of all.  <a href="#5aefe23e267e4f2e5987cfcaf2599dcb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SyncItem *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#fc9caba3f1cd1b360d99924dd806e028">getNextItem</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the next SyncItem of all.  <a href="#fc9caba3f1cd1b360d99924dd806e028"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SyncItem *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#b7e104d4480b0dded248c55673604d01">getFirstNewItem</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the first SyncItem of new one.  <a href="#b7e104d4480b0dded248c55673604d01"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SyncItem *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#7176720e70825bee6a57f71a32f6a642">getNextNewItem</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the next SyncItem of new one.  <a href="#7176720e70825bee6a57f71a32f6a642"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SyncItem *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#35565718c50695ff28e4cda4235c5ea4">getFirstUpdatedItem</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the first SyncItem of updated one.  <a href="#35565718c50695ff28e4cda4235c5ea4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SyncItem *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#2d2dd1d4bdf7d93f239bf391aad79335">getNextUpdatedItem</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the next SyncItem of updated one.  <a href="#2d2dd1d4bdf7d93f239bf391aad79335"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SyncItem *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#41faa1fa3ab648ce76a6c27d6745f3c4">getFirstDeletedItem</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the first SyncItem of updated one.  <a href="#41faa1fa3ab648ce76a6c27d6745f3c4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SyncItem *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#a82c623410068876a3d71a26141274fc">getNextDeletedItem</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the next SyncItem of updated one.  <a href="#a82c623410068876a3d71a26141274fc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#9fbf319a0753992bc22ee4ae01458d66">serverStatusPackageEnded</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Indicates that all the server status of the current package of the client items has been processed by the engine.  <a href="#9fbf319a0753992bc22ee4ae01458d66"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#a0a8e0c059e9810e63ac3ea2c87b1cd5">clientStatusPackageEnded</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Indicates that all the client status of the current package of the server items that has been processed by the client and are going to be sent to the server.  <a href="#a0a8e0c059e9810e63ac3ea2c87b1cd5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b68c82e35dc5f0c4fa226319f6ebe705"></a><!-- doxytag: member="CacheSyncSource::endSync" ref="b68c82e35dc5f0c4fa226319f6ebe705" args="()" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#b68c82e35dc5f0c4fa226319f6ebe705">endSync</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">In the first implementatation, in which serverStatusPackageEnded and clientStatusPackageEnded are not yet impelemented, the end sync will udpate the whole cache status persistently. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual StringBuffer&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#b708f72b536c855b59e3c1a1146ce88c">getItemSignature</a> (StringBuffer &amp;key)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the signature of an item given the key.  <a href="#b708f72b536c855b59e3c1a1146ce88c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#165f9c680c238d15c72b173c4950c1c2">getItemContent</a> (StringBuffer &amp;key, size_t *size)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the content of an item given the key.  <a href="#165f9c680c238d15c72b173c4950c1c2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="classEnumeration.html">Enumeration</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#4948e75960aac2250617013f0f2c9d74">getAllItemList</a> ()=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get an array list containing all the StringBuffer keys of all items.  <a href="#4948e75960aac2250617013f0f2c9d74"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#0e7c91c6433cfe60e82bd35cada23c56">insertItem</a> (SyncItem &amp;item)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called by the sync engine to add an item that the server has sent.  <a href="#0e7c91c6433cfe60e82bd35cada23c56"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#45760711354feddb886c863598e2a9d2">modifyItem</a> (SyncItem &amp;item)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called by the sync engine to update an item that the source already should have.  <a href="#45760711354feddb886c863598e2a9d2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#341c8c4bba5999016c01087f25c76f13">removeItem</a> (SyncItem &amp;item)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called by the sync engine to update an item that the source already should have.  <a href="#341c8c4bba5999016c01087f25c76f13"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ee17790521ec25c756840cb5da99de9f"></a><!-- doxytag: member="CacheSyncSource::saveCache" ref="ee17790521ec25c756840cb5da99de9f" args="()" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#ee17790521ec25c756840cb5da99de9f">saveCache</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Save the current cache in what is implemented by <a class="el" href="classKeyValueStore.html">KeyValueStore</a> (a file or wathever). <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#53cf1db5314341f02b30f7498c009eb7">addItem</a> (SyncItem &amp;item)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called by the sync engine to add an item that the server has sent.  <a href="#53cf1db5314341f02b30f7498c009eb7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#70ffee80d924462b45e2f4e0868d3c87">updateItem</a> (SyncItem &amp;item)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called by the sync engine to update an item that the source already should have.  <a href="#70ffee80d924462b45e2f4e0868d3c87"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#630eb7c331077fcf1899a76a5ca0c783">deleteItem</a> (SyncItem &amp;item)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called by the sync engine to update an item that the source already should have.  <a href="#630eb7c331077fcf1899a76a5ca0c783"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#b1596b35e26f11f0e12ab6299f16bf9d">updateInCache</a> (KeyValuePair &amp;k, const char *action=REPLACE)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Used to update the cache adding, replacing or deleting.  <a href="#b1596b35e26f11f0e12ab6299f16bf9d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c3234648fd49aa690e9ece56323ffedc"></a><!-- doxytag: member="CacheSyncSource::insertInCache" ref="c3234648fd49aa690e9ece56323ffedc" args="(KeyValuePair &amp;k)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#c3234648fd49aa690e9ece56323ffedc">insertInCache</a> (KeyValuePair &amp;k)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">To insert in the cache. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="22f658f5d6272ee3e87918e63d3caaa5"></a><!-- doxytag: member="CacheSyncSource::removeFromCache" ref="22f658f5d6272ee3e87918e63d3caaa5" args="(KeyValuePair &amp;k)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCacheSyncSource.html#22f658f5d6272ee3e87918e63d3caaa5">removeFromCache</a> (KeyValuePair &amp;k)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">To remove from cache. <br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This is an extension of the basic <a class="el" href="classSyncSource.html">SyncSource</a> that a SyncML client developer could implement to let the sync engine access the client's data. 
<p>
It provides the logic to retrieve the item modification to be exchanged with the server 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="3eabd43ca0667b7afb2f1302af1c630d"></a><!-- doxytag: member="CacheSyncSource::CacheSyncSource" ref="3eabd43ca0667b7afb2f1302af1c630d" args="(const WCHAR *name, AbstractSyncSourceConfig *sc, KeyValueStore *cache=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CacheSyncSource::CacheSyncSource           </td>
          <td>(</td>
          <td class="paramtype">const WCHAR *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classAbstractSyncSourceConfig.html">AbstractSyncSourceConfig</a> *&nbsp;</td>
          <td class="paramname"> <em>sc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classKeyValueStore.html">KeyValueStore</a> *&nbsp;</td>
          <td class="paramname"> <em>cache</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constructor: create a <a class="el" href="classCacheSyncSource.html">CacheSyncSource</a> with the specified name. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>the name of the <a class="el" href="classSyncSource.html">SyncSource</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sc</em>&nbsp;</td><td>configuration for the sync source: the instance must remain valid throughout the lifetime of the sync source because it keeps a reference to it and uses it as its own. A NULL pointer is allowed for unit testing outside of the sync framework; the sync source then references a global config instance to avoid crashes, but modifying that config will not make much sense. The pointer may also be set directly after creating the <a class="el" href="classSyncSource.html">SyncSource</a>, which is useful when a derived class creates the config in its own constructor. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cache</em>&nbsp;</td><td>the store for the cache. Released by the <a class="el" href="classCacheSyncSource.html">CacheSyncSource</a> </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="53cf1db5314341f02b30f7498c009eb7"></a><!-- doxytag: member="CacheSyncSource::addItem" ref="53cf1db5314341f02b30f7498c009eb7" args="(SyncItem &amp;item)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int CacheSyncSource::addItem           </td>
          <td>(</td>
          <td class="paramtype">SyncItem &amp;&nbsp;</td>
          <td class="paramname"> <em>item</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called by the sync engine to add an item that the server has sent. 
<p>
The implementation calls the insertItem method that must be implemented by the user. Also used to update the item 
<p>
Implements <a class="el" href="classSyncSource.html#0d60a2f99dc8340320e8b60779b07205">SyncSource</a>.
</div>
</div><p>
<a class="anchor" name="70ffee80d924462b45e2f4e0868d3c87"></a><!-- doxytag: member="CacheSyncSource::updateItem" ref="70ffee80d924462b45e2f4e0868d3c87" args="(SyncItem &amp;item)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int CacheSyncSource::updateItem           </td>
          <td>(</td>
          <td class="paramtype">SyncItem &amp;&nbsp;</td>
          <td class="paramname"> <em>item</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called by the sync engine to update an item that the source already should have. 
<p>
The item's key is the local key of that item.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>item</em>&nbsp;</td><td>the item as sent by the server </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>SyncML status code </dd></dl>

<p>
Implements <a class="el" href="classSyncSource.html#b334e10882e18289dbd627d468d47a74">SyncSource</a>.
</div>
</div><p>
<a class="anchor" name="630eb7c331077fcf1899a76a5ca0c783"></a><!-- doxytag: member="CacheSyncSource::deleteItem" ref="630eb7c331077fcf1899a76a5ca0c783" args="(SyncItem &amp;item)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int CacheSyncSource::deleteItem           </td>
          <td>(</td>
          <td class="paramtype">SyncItem &amp;&nbsp;</td>
          <td class="paramname"> <em>item</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called by the sync engine to update an item that the source already should have. 
<p>
The item's key is the local key of that item, no data is provided.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>item</em>&nbsp;</td><td>the item as sent by the server </td></tr>
  </table>
</dl>

<p>
Implements <a class="el" href="classSyncSource.html#c3faa327d0bc1a51f33d46c58a3b9020">SyncSource</a>.
</div>
</div><p>
<a class="anchor" name="b1596b35e26f11f0e12ab6299f16bf9d"></a><!-- doxytag: member="CacheSyncSource::updateInCache" ref="b1596b35e26f11f0e12ab6299f16bf9d" args="(KeyValuePair &amp;k, const char *action=REPLACE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int CacheSyncSource::updateInCache           </td>
          <td>(</td>
          <td class="paramtype">KeyValuePair &amp;&nbsp;</td>
          <td class="paramname"> <em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>action</em> = <code>REPLACE</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Used to update the cache adding, replacing or deleting. 
<p>
The KeyValuePair contains the pair UID/signature. It is provided by the proper method who calls this. It udpates the cache that is in memory. The action by default is Replace. 
</div>
</div><p>
<a class="anchor" name="7326b8f54971e979c10e2cb04daa3aa4"></a><!-- doxytag: member="CacheSyncSource::setItemStatus" ref="7326b8f54971e979c10e2cb04daa3aa4" args="(const WCHAR *key, int status, const char *command)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CacheSyncSource::setItemStatus           </td>
          <td>(</td>
          <td class="paramtype">const WCHAR *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>command</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
called by the sync engine with the status returned by the server for a certain item that the client sent to the server. 
<p>
It contains also the proper command associated to the item. It is used to update the current array of cache.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>- the local key of the item </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>status</em>&nbsp;</td><td>- the SyncML status returned by the server </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>command</em>&nbsp;</td><td>- the SyncML command associated to the item </td></tr>
  </table>
</dl>

<p>
Reimplemented from <a class="el" href="classSyncSource.html#347938a68a5033130e5ae3f9f0dfff4d">SyncSource</a>.
</div>
</div><p>
<a class="anchor" name="f342003c8a9eabba7f624b5268a564f3"></a><!-- doxytag: member="CacheSyncSource::getFirstItemKey" ref="f342003c8a9eabba7f624b5268a564f3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SyncItem* CacheSyncSource::getFirstItemKey           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the key of the first SyncItem of all. 
<p>
It is used in case of refresh sync and retrieve all the keys of the data source. <dl compact><dt><b><a class="el" href="deprecated.html#_deprecated000001">Deprecated:</a></b></dt><dd>no more used. use removeAllItems instead. </dd></dl>

<p>
Implements <a class="el" href="classSyncSource.html#4608b13dd581d006be667fbeaead2f70">SyncSource</a>.
</div>
</div><p>
<a class="anchor" name="d3474cc0881a5fc312c04999a5e2c152"></a><!-- doxytag: member="CacheSyncSource::getNextItemKey" ref="d3474cc0881a5fc312c04999a5e2c152" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SyncItem* CacheSyncSource::getNextItemKey           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the key of the next SyncItem of all. 
<p>
It is used in case of refresh sync and retrieve all the keys of the data source. <dl compact><dt><b><a class="el" href="deprecated.html#_deprecated000002">Deprecated:</a></b></dt><dd>no more used. use removeAllItems instead. </dd></dl>

<p>
Implements <a class="el" href="classSyncSource.html#04b602c713d650f661aaf43572d81f59">SyncSource</a>.
</div>
</div><p>
<a class="anchor" name="5aefe23e267e4f2e5987cfcaf2599dcb"></a><!-- doxytag: member="CacheSyncSource::getFirstItem" ref="5aefe23e267e4f2e5987cfcaf2599dcb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SyncItem* CacheSyncSource::getFirstItem           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the first SyncItem of all. 
<p>
It is used in case of slow sync and retrieve the entire data source content. 
<p>
Implements <a class="el" href="classSyncSource.html#6f06bbd971fcbc028ce74e66bfa3a4cf">SyncSource</a>.
</div>
</div><p>
<a class="anchor" name="fc9caba3f1cd1b360d99924dd806e028"></a><!-- doxytag: member="CacheSyncSource::getNextItem" ref="fc9caba3f1cd1b360d99924dd806e028" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SyncItem* CacheSyncSource::getNextItem           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the next SyncItem of all. 
<p>
It is used in case of slow sync and retrieve the entire data source content. 
<p>
Implements <a class="el" href="classSyncSource.html#f4f0cadb95759d1f714b77c77d1ac6c1">SyncSource</a>.
</div>
</div><p>
<a class="anchor" name="b7e104d4480b0dded248c55673604d01"></a><!-- doxytag: member="CacheSyncSource::getFirstNewItem" ref="b7e104d4480b0dded248c55673604d01" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SyncItem* CacheSyncSource::getFirstNewItem           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the first SyncItem of new one. 
<p>
It is used in case of fast sync and retrieve the new data source content. 
<p>
Implements <a class="el" href="classSyncSource.html#a4a1141dafaa9d369c5994e83208c106">SyncSource</a>.
</div>
</div><p>
<a class="anchor" name="7176720e70825bee6a57f71a32f6a642"></a><!-- doxytag: member="CacheSyncSource::getNextNewItem" ref="7176720e70825bee6a57f71a32f6a642" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SyncItem* CacheSyncSource::getNextNewItem           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the next SyncItem of new one. 
<p>
It is used in case of fast sync and retrieve the new data source content. 
<p>
Implements <a class="el" href="classSyncSource.html#7b0ecf6ef78830b86b7634e660b970ba">SyncSource</a>.
</div>
</div><p>
<a class="anchor" name="35565718c50695ff28e4cda4235c5ea4"></a><!-- doxytag: member="CacheSyncSource::getFirstUpdatedItem" ref="35565718c50695ff28e4cda4235c5ea4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SyncItem* CacheSyncSource::getFirstUpdatedItem           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the first SyncItem of updated one. 
<p>
It is used in case of fast sync and retrieve the new data source content. 
<p>
Implements <a class="el" href="classSyncSource.html#0f1309b03694ca3af538fa287f3b67ec">SyncSource</a>.
</div>
</div><p>
<a class="anchor" name="2d2dd1d4bdf7d93f239bf391aad79335"></a><!-- doxytag: member="CacheSyncSource::getNextUpdatedItem" ref="2d2dd1d4bdf7d93f239bf391aad79335" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SyncItem* CacheSyncSource::getNextUpdatedItem           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the next SyncItem of updated one. 
<p>
It is used in case of fast sync and retrieve the new data source content. 
<p>
Implements <a class="el" href="classSyncSource.html#0a81ac5902766067c2ee886dc481a371">SyncSource</a>.
</div>
</div><p>
<a class="anchor" name="41faa1fa3ab648ce76a6c27d6745f3c4"></a><!-- doxytag: member="CacheSyncSource::getFirstDeletedItem" ref="41faa1fa3ab648ce76a6c27d6745f3c4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SyncItem* CacheSyncSource::getFirstDeletedItem           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the first SyncItem of updated one. 
<p>
It is used in case of fast sync and retrieve the new data source content. 
<p>
Implements <a class="el" href="classSyncSource.html#a7e086bb00e085cc2ad76431674c5fe9">SyncSource</a>.
</div>
</div><p>
<a class="anchor" name="a82c623410068876a3d71a26141274fc"></a><!-- doxytag: member="CacheSyncSource::getNextDeletedItem" ref="a82c623410068876a3d71a26141274fc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SyncItem* CacheSyncSource::getNextDeletedItem           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the next SyncItem of updated one. 
<p>
It is used in case of fast sync and retrieve the new data source content. 
<p>
Implements <a class="el" href="classSyncSource.html#a6dea9891d27073f1905020170fa81b0">SyncSource</a>.
</div>
</div><p>
<a class="anchor" name="9fbf319a0753992bc22ee4ae01458d66"></a><!-- doxytag: member="CacheSyncSource::serverStatusPackageEnded" ref="9fbf319a0753992bc22ee4ae01458d66" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CacheSyncSource::serverStatusPackageEnded           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Indicates that all the server status of the current package of the client items has been processed by the engine. 
<p>
This signal can be useful to update the modification arrays NOT USED at the moment 
<p>
Reimplemented from <a class="el" href="classSyncSource.html#9443376b49c06affb8e5099db913ede7">SyncSource</a>.
</div>
</div><p>
<a class="anchor" name="a0a8e0c059e9810e63ac3ea2c87b1cd5"></a><!-- doxytag: member="CacheSyncSource::clientStatusPackageEnded" ref="a0a8e0c059e9810e63ac3ea2c87b1cd5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CacheSyncSource::clientStatusPackageEnded           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Indicates that all the client status of the current package of the server items that has been processed by the client and are going to be sent to the server. 
<p>
This signal can be useful to update the modification arrays NOT USED at the moment 
<p>
Reimplemented from <a class="el" href="classSyncSource.html#5b68a10405b68bcd4fbfc8d0ae3baa0b">SyncSource</a>.
</div>
</div><p>
<a class="anchor" name="b708f72b536c855b59e3c1a1146ce88c"></a><!-- doxytag: member="CacheSyncSource::getItemSignature" ref="b708f72b536c855b59e3c1a1146ce88c" args="(StringBuffer &amp;key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual StringBuffer CacheSyncSource::getItemSignature           </td>
          <td>(</td>
          <td class="paramtype">StringBuffer &amp;&nbsp;</td>
          <td class="paramname"> <em>key</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the signature of an item given the key. 
<p>
The signature could be a crc computation or a timestamp or whatever can identify uniquely the content of an item. The default implementation uses a crc computation of the value. Overriding implementation could provide something different like the timestamp or other...<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>the key of the item. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the signature of the selected item </dd></dl>

</div>
</div><p>
<a class="anchor" name="165f9c680c238d15c72b173c4950c1c2"></a><!-- doxytag: member="CacheSyncSource::getItemContent" ref="165f9c680c238d15c72b173c4950c1c2" args="(StringBuffer &amp;key, size_t *size)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void* CacheSyncSource::getItemContent           </td>
          <td>(</td>
          <td class="paramtype">StringBuffer &amp;&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the content of an item given the key. 
<p>
It is used to populate the SyncItem before the engine uses it in the usual flow of the sync.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>the local key of the item </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>OUT: the size of the content </td></tr>
  </table>
</dl>

<p>
Implemented in <a class="el" href="classBriefcaseCacheSyncSource.html#dde4fdd141c7ec9beffce33fca26ab42">BriefcaseCacheSyncSource</a>.
</div>
</div><p>
<a class="anchor" name="4948e75960aac2250617013f0f2c9d74"></a><!-- doxytag: member="CacheSyncSource::getAllItemList" ref="4948e75960aac2250617013f0f2c9d74" args="()=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classEnumeration.html">Enumeration</a>* CacheSyncSource::getAllItemList           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get an array list containing all the StringBuffer keys of all items. 
<p>
Used for the sync requiring and exchange of all items and for the sync that need to calculate the modification. It has to return a new allocated <a class="el" href="classEnumeration.html">Enumeration</a> that is freed by the <a class="el" href="classCacheSyncSource.html">CacheSyncSource</a> 
<p>
Implemented in <a class="el" href="classBriefcaseCacheSyncSource.html#b36960ad1297b0d2886ca40c3bee83ee">BriefcaseCacheSyncSource</a>.
</div>
</div><p>
<a class="anchor" name="0e7c91c6433cfe60e82bd35cada23c56"></a><!-- doxytag: member="CacheSyncSource::insertItem" ref="0e7c91c6433cfe60e82bd35cada23c56" args="(SyncItem &amp;item)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int CacheSyncSource::insertItem           </td>
          <td>(</td>
          <td class="paramtype">SyncItem &amp;&nbsp;</td>
          <td class="paramname"> <em>item</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called by the sync engine to add an item that the server has sent. 
<p>
The sync source is expected to add it to its database, then set the key to the local key assigned to the new item. Alternatively the sync source can match the new item against one of the existing items and return that key.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>item</em>&nbsp;</td><td>the item as sent by the server </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>SyncML status code </dd></dl>

<p>
Implemented in <a class="el" href="classBriefcaseCacheSyncSource.html#6e9a42186fb534603f13eca46f5e4b7f">BriefcaseCacheSyncSource</a>.
</div>
</div><p>
<a class="anchor" name="45760711354feddb886c863598e2a9d2"></a><!-- doxytag: member="CacheSyncSource::modifyItem" ref="45760711354feddb886c863598e2a9d2" args="(SyncItem &amp;item)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int CacheSyncSource::modifyItem           </td>
          <td>(</td>
          <td class="paramtype">SyncItem &amp;&nbsp;</td>
          <td class="paramname"> <em>item</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called by the sync engine to update an item that the source already should have. 
<p>
The item's key is the local key of that item.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>item</em>&nbsp;</td><td>the item as sent by the server </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>SyncML status code </dd></dl>

<p>
Implemented in <a class="el" href="classBriefcaseCacheSyncSource.html#72d88d657c489787e260501400dddb5c">BriefcaseCacheSyncSource</a>.
</div>
</div><p>
<a class="anchor" name="341c8c4bba5999016c01087f25c76f13"></a><!-- doxytag: member="CacheSyncSource::removeItem" ref="341c8c4bba5999016c01087f25c76f13" args="(SyncItem &amp;item)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int CacheSyncSource::removeItem           </td>
          <td>(</td>
          <td class="paramtype">SyncItem &amp;&nbsp;</td>
          <td class="paramname"> <em>item</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called by the sync engine to update an item that the source already should have. 
<p>
The item's key is the local key of that item, no data is provided.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>item</em>&nbsp;</td><td>the item as sent by the server </td></tr>
  </table>
</dl>

<p>
Implemented in <a class="el" href="classBriefcaseCacheSyncSource.html#6a1c2465b05c14df5659dc1f2573da8a">BriefcaseCacheSyncSource</a>.
</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>src/include/common/client/<a class="el" href="CacheSyncSource_8h-source.html">CacheSyncSource.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Fri Jul 25 15:04:18 2008 for Funambol C++ Client Library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
