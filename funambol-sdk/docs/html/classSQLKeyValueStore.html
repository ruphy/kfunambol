<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Funambol C++ Client Library: SQLKeyValueStore Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>SQLKeyValueStore Class Reference<br>
<small>
[<a class="el" href="group__Client.html">Sync Client</a>]</small>
</h1><!-- doxytag: class="SQLKeyValueStore" --><!-- doxytag: inherits="KeyValueStore" -->This abstract class represent an implementation of <a class="el" href="classKeyValueStore.html">KeyValueStore</a> based on a generic SQL database.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="SQLKeyValueStore_8h-source.html">SQLKeyValueStore.h</a>&gt;</code>
<p>
Inheritance diagram for SQLKeyValueStore:<p><center><img src="classSQLKeyValueStore__inherit__graph.png" border="0" usemap="#SQLKeyValueStore__inherit__map" alt="Inheritance graph"></center>
<map name="SQLKeyValueStore__inherit__map">
<area href="classKeyValueStore.html" shape="rect" coords="115,7,230,31" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for SQLKeyValueStore:<p><center><img src="classSQLKeyValueStore__coll__graph.png" border="0" usemap="#SQLKeyValueStore__coll__map" alt="Collaboration graph"></center>
<map name="SQLKeyValueStore__coll__map">
<area href="classKeyValueStore.html" shape="rect" coords="6,84,120,108" alt="">
<area href="classArrayListEnumeration.html" shape="rect" coords="144,84,310,108" alt="">
<area href="classEnumeration.html" shape="rect" coords="174,7,280,31" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classSQLKeyValueStore-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0f3112f73c4ff63bfb90c27fa3c2a92d"></a><!-- doxytag: member="SQLKeyValueStore::SQLKeyValueStore" ref="0f3112f73c4ff63bfb90c27fa3c2a92d" args="(const StringBuffer &amp;table, const StringBuffer &amp;colKey, const StringBuffer &amp;colValue)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>SQLKeyValueStore</b> (const StringBuffer &amp;table, const StringBuffer &amp;colKey, const StringBuffer &amp;colValue)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="306784e12f3b97b51b11b1a7f7cb806a"></a><!-- doxytag: member="SQLKeyValueStore::connect" ref="306784e12f3b97b51b11b1a7f7cb806a" args="()=0" -->
virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><b>connect</b> ()=0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="393b582c0406a08b5e598cd97fbc724b"></a><!-- doxytag: member="SQLKeyValueStore::disconnect" ref="393b582c0406a08b5e598cd97fbc724b" args="()=0" -->
virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><b>disconnect</b> ()=0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual StringBuffer&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSQLKeyValueStore.html#6efb8a4c66d818df9571e5e81300a938">readPropertyValue</a> (const char *prop) const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the value of the given property.  <a href="#6efb8a4c66d818df9571e5e81300a938"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSQLKeyValueStore.html#f3eb8e98ece90f390f5459c44f0c653b">setPropertyValue</a> (const char *prop, const char *value)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets a property value.  <a href="#f3eb8e98ece90f390f5459c44f0c653b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSQLKeyValueStore.html#7314067e7fc6219420042bd8501d1db4">removeProperty</a> (const char *prop)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove a certain property.  <a href="#7314067e7fc6219420042bd8501d1db4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="541daedff7b07564a90b02cfd884a880"></a><!-- doxytag: member="SQLKeyValueStore::getProperties" ref="541daedff7b07564a90b02cfd884a880" args="() const" -->
virtual <a class="el" href="classEnumeration.html">Enumeration</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSQLKeyValueStore.html#541daedff7b07564a90b02cfd884a880">getProperties</a> () const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get all the properties that are currently defined. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSQLKeyValueStore.html#5dc2c0a3df8e4e38deca4eab5909e753">save</a> ()=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Ensure that all properties are stored persistently.  <a href="#5dc2c0a3df8e4e38deca4eab5909e753"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c660cfd535e880f37e8cb01106a17724"></a><!-- doxytag: member="SQLKeyValueStore::query" ref="c660cfd535e880f37e8cb01106a17724" args="(const StringBuffer &amp;sql) const=0" -->
virtual <a class="el" href="classEnumeration.html">Enumeration</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><b>query</b> (const StringBuffer &amp;sql) const=0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c69531ea85bfc81137042357fe2acee7"></a><!-- doxytag: member="SQLKeyValueStore::execute" ref="c69531ea85bfc81137042357fe2acee7" args="(const StringBuffer &amp;sql)=0" -->
virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><b>execute</b> (const StringBuffer &amp;sql)=0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="cdda6c3f74ca14b4e0f245c17b894119"></a><!-- doxytag: member="SQLKeyValueStore::sqlColKey" ref="cdda6c3f74ca14b4e0f245c17b894119" args="() const" -->
virtual StringBuffer&nbsp;</td><td class="memItemRight" valign="bottom"><b>sqlColKey</b> () const</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="041d96bbd53e7d4f596191b308acc83e"></a><!-- doxytag: member="SQLKeyValueStore::sqlColValue" ref="041d96bbd53e7d4f596191b308acc83e" args="() const" -->
virtual StringBuffer&nbsp;</td><td class="memItemRight" valign="bottom"><b>sqlColValue</b> () const</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5fcdfa62a0052e610ba5f59ac2b0a41c"></a><!-- doxytag: member="SQLKeyValueStore::sqlRemovePropertyString" ref="5fcdfa62a0052e610ba5f59ac2b0a41c" args="(const StringBuffer &amp;key) const" -->
virtual StringBuffer&nbsp;</td><td class="memItemRight" valign="bottom"><b>sqlRemovePropertyString</b> (const StringBuffer &amp;key) const</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0ab9b81fd384784047bd3a65a5141613"></a><!-- doxytag: member="SQLKeyValueStore::sqlSetPropertyString" ref="0ab9b81fd384784047bd3a65a5141613" args="(const StringBuffer &amp;key, const StringBuffer &amp;value) const" -->
virtual StringBuffer&nbsp;</td><td class="memItemRight" valign="bottom"><b>sqlSetPropertyString</b> (const StringBuffer &amp;key, const StringBuffer &amp;value) const</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="af2810b8d41e254a94335d77a3bc560c"></a><!-- doxytag: member="SQLKeyValueStore::sqlGetPropertyString" ref="af2810b8d41e254a94335d77a3bc560c" args="(const StringBuffer &amp;key) const" -->
virtual StringBuffer&nbsp;</td><td class="memItemRight" valign="bottom"><b>sqlGetPropertyString</b> (const StringBuffer &amp;key) const</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e90bb3deb175e4627ba6d8efde29f04b"></a><!-- doxytag: member="SQLKeyValueStore::sqlGetAllString" ref="e90bb3deb175e4627ba6d8efde29f04b" args="() const" -->
virtual StringBuffer&nbsp;</td><td class="memItemRight" valign="bottom"><b>sqlGetAllString</b> () const</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="07805604c9bd7a58321b994cd105f0d6"></a><!-- doxytag: member="SQLKeyValueStore::sqlCountAllString" ref="07805604c9bd7a58321b994cd105f0d6" args="() const" -->
virtual StringBuffer&nbsp;</td><td class="memItemRight" valign="bottom"><b>sqlCountAllString</b> () const</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This abstract class represent an implementation of <a class="el" href="classKeyValueStore.html">KeyValueStore</a> based on a generic SQL database. 
<p>
It allows the developer to specify the column to use for the key and value, the table name to use for the storage, and requires to implement the methods to connect/disconnect to the database, which are specific to the db driver in use (odbc, etc.) 
<p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="6efb8a4c66d818df9571e5e81300a938"></a><!-- doxytag: member="SQLKeyValueStore::readPropertyValue" ref="6efb8a4c66d818df9571e5e81300a938" args="(const char *prop) const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual StringBuffer SQLKeyValueStore::readPropertyValue           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>prop</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the value of the given property. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>prop</em>&nbsp;</td><td>- the property name</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A NULL StringBuffer in the returned implies that the property was not set. Otherwise the value it was set to is returned (which can be "", the empty string). </dd></dl>

<p>
Implements <a class="el" href="classKeyValueStore.html#b2761e4c37d95c30c978ff1a928af047">KeyValueStore</a>.
</div>
</div><p>
<a class="anchor" name="f3eb8e98ece90f390f5459c44f0c653b"></a><!-- doxytag: member="SQLKeyValueStore::setPropertyValue" ref="f3eb8e98ece90f390f5459c44f0c653b" args="(const char *prop, const char *value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int SQLKeyValueStore::setPropertyValue           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>prop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets a property value. 
<p>
The value might be cached inside the implementation of this interface. To ensure that it is stored persistently and to do error checking, call <a class="el" href="classSQLKeyValueStore.html#5dc2c0a3df8e4e38deca4eab5909e753">save()</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>prop</em>&nbsp;</td><td>- the property name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>value</em>&nbsp;</td><td>- the property value (zero terminated string)</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>int 0 on success, an error code otherwise </dd></dl>

<p>
Implements <a class="el" href="classKeyValueStore.html#7b202d8d64dd966b19e34a91d86dd0de">KeyValueStore</a>.
</div>
</div><p>
<a class="anchor" name="7314067e7fc6219420042bd8501d1db4"></a><!-- doxytag: member="SQLKeyValueStore::removeProperty" ref="7314067e7fc6219420042bd8501d1db4" args="(const char *prop)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int SQLKeyValueStore::removeProperty           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>prop</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Remove a certain property. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>prop</em>&nbsp;</td><td>the name of the property which is to be removed</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>int 0 on success, an error code otherwise </dd></dl>

<p>
Implements <a class="el" href="classKeyValueStore.html#95f1706e2b004c6abc3a874ba0f5cfed">KeyValueStore</a>.
</div>
</div><p>
<a class="anchor" name="5dc2c0a3df8e4e38deca4eab5909e753"></a><!-- doxytag: member="SQLKeyValueStore::save" ref="5dc2c0a3df8e4e38deca4eab5909e753" args="()=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int SQLKeyValueStore::save           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Ensure that all properties are stored persistently. 
<p>
If setting a property led to an error earlier, this call will indicate the failure.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 - success, failure otherwise </dd></dl>

<p>
Implements <a class="el" href="classKeyValueStore.html#62d7f0c759f3aa6f9e70380c84a60aaa">KeyValueStore</a>.
</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>src/include/common/client/<a class="el" href="SQLKeyValueStore_8h-source.html">SQLKeyValueStore.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Fri Jul 25 15:04:21 2008 for Funambol C++ Client Library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
